
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ogusa.household &#8212; OG-USA 0.6.2 documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for ogusa.household</h1><div class="highlight"><pre>
<span></span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">------------------------------------------------------------------------</span>
<span class="sd">Household functions.</span>
<span class="sd">------------------------------------------------------------------------</span>
<span class="sd">&#39;&#39;&#39;</span>

<span class="c1"># Packages</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">ogusa</span> <span class="kn">import</span> <span class="n">tax</span><span class="p">,</span> <span class="n">utils</span>

<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">------------------------------------------------------------------------</span>
<span class="sd">    Functions</span>
<span class="sd">------------------------------------------------------------------------</span>
<span class="sd">&#39;&#39;&#39;</span>


<div class="viewcode-block" id="marg_ut_cons"><a class="viewcode-back" href="../../household.html#ogusa.household.marg_ut_cons">[docs]</a><span class="k">def</span> <span class="nf">marg_ut_cons</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">sigma</span><span class="p">):</span>
    <span class="sa">r</span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Compute the marginal utility of consumption.</span>

<span class="sd">    .. math::</span>
<span class="sd">        MU_{c} = c^{-\sigma}</span>

<span class="sd">    Args:</span>
<span class="sd">        c (array_like): household consumption</span>
<span class="sd">        sigma (scalar): coefficient of relative risk aversion</span>

<span class="sd">    Returns:</span>
<span class="sd">        output (array_like): marginal utility of consumption</span>

<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">ndim</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">c</span><span class="p">])</span>
    <span class="n">epsilon</span> <span class="o">=</span> <span class="mf">0.003</span>
    <span class="n">cvec_cnstr</span> <span class="o">=</span> <span class="n">c</span> <span class="o">&lt;</span> <span class="n">epsilon</span>
    <span class="n">MU_c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
    <span class="n">MU_c</span><span class="p">[</span><span class="o">~</span><span class="n">cvec_cnstr</span><span class="p">]</span> <span class="o">=</span> <span class="n">c</span><span class="p">[</span><span class="o">~</span><span class="n">cvec_cnstr</span><span class="p">]</span> <span class="o">**</span> <span class="p">(</span><span class="o">-</span><span class="n">sigma</span><span class="p">)</span>
    <span class="n">b2</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="n">sigma</span> <span class="o">*</span> <span class="p">(</span><span class="n">epsilon</span> <span class="o">**</span> <span class="p">(</span><span class="o">-</span><span class="n">sigma</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)))</span> <span class="o">/</span> <span class="mi">2</span>
    <span class="n">b1</span> <span class="o">=</span> <span class="p">(</span><span class="n">epsilon</span> <span class="o">**</span> <span class="p">(</span><span class="o">-</span><span class="n">sigma</span><span class="p">))</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">b2</span> <span class="o">*</span> <span class="n">epsilon</span>
    <span class="n">MU_c</span><span class="p">[</span><span class="n">cvec_cnstr</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">b2</span> <span class="o">*</span> <span class="n">c</span><span class="p">[</span><span class="n">cvec_cnstr</span><span class="p">]</span> <span class="o">+</span> <span class="n">b1</span>
    <span class="n">output</span> <span class="o">=</span> <span class="n">MU_c</span>
    <span class="n">output</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">squeeze</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">output</span></div>


<div class="viewcode-block" id="marg_ut_labor"><a class="viewcode-back" href="../../household.html#ogusa.household.marg_ut_labor">[docs]</a><span class="k">def</span> <span class="nf">marg_ut_labor</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">chi_n</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
    <span class="sa">r</span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Compute the marginal disutility of labor.</span>

<span class="sd">    .. math::</span>
<span class="sd">        MDU_{l} = \chi^n_{s}\biggl(\frac{b}{\tilde{l}}\biggr)\biggl(\frac{n_{j,s,t}}{\tilde{l}}\biggr)^{\upsilon-1}\Biggl[1-\biggl(\frac{n_{j,s,t}}{\tilde{l}}\biggr)^\upsilon\Biggr]^{\frac{1-\upsilon}{\upsilon}}</span>

<span class="sd">    Args:</span>
<span class="sd">        n (array_like): household labor supply</span>
<span class="sd">        chi_n (array_like): utility weights on disutility of labor</span>
<span class="sd">        p (OG-USA Specifications object): model parameters</span>

<span class="sd">    Returns:</span>
<span class="sd">        output (array_like): marginal disutility of labor supply</span>

<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">nvec</span> <span class="o">=</span> <span class="n">n</span>
    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">ndim</span><span class="p">(</span><span class="n">nvec</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">nvec</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">nvec</span><span class="p">])</span>
    <span class="n">eps_low</span> <span class="o">=</span> <span class="mf">0.000001</span>
    <span class="n">eps_high</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">ltilde</span> <span class="o">-</span> <span class="mf">0.000001</span>
    <span class="n">nvec_low</span> <span class="o">=</span> <span class="n">nvec</span> <span class="o">&lt;</span> <span class="n">eps_low</span>
    <span class="n">nvec_high</span> <span class="o">=</span> <span class="n">nvec</span> <span class="o">&gt;</span> <span class="n">eps_high</span>
    <span class="n">nvec_uncstr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">logical_and</span><span class="p">(</span><span class="o">~</span><span class="n">nvec_low</span><span class="p">,</span> <span class="o">~</span><span class="n">nvec_high</span><span class="p">)</span>
    <span class="n">MDU_n</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">nvec</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
    <span class="n">MDU_n</span><span class="p">[</span><span class="n">nvec_uncstr</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">b_ellipse</span> <span class="o">/</span> <span class="n">p</span><span class="o">.</span><span class="n">ltilde</span><span class="p">)</span> <span class="o">*</span>
        <span class="p">((</span><span class="n">nvec</span><span class="p">[</span><span class="n">nvec_uncstr</span><span class="p">]</span> <span class="o">/</span> <span class="n">p</span><span class="o">.</span><span class="n">ltilde</span><span class="p">)</span> <span class="o">**</span> <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">upsilon</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span> <span class="o">*</span>
        <span class="p">((</span><span class="mi">1</span> <span class="o">-</span> <span class="p">((</span><span class="n">nvec</span><span class="p">[</span><span class="n">nvec_uncstr</span><span class="p">]</span> <span class="o">/</span> <span class="n">p</span><span class="o">.</span><span class="n">ltilde</span><span class="p">)</span> <span class="o">**</span> <span class="n">p</span><span class="o">.</span><span class="n">upsilon</span><span class="p">))</span> <span class="o">**</span>
         <span class="p">((</span><span class="mi">1</span> <span class="o">-</span> <span class="n">p</span><span class="o">.</span><span class="n">upsilon</span><span class="p">)</span> <span class="o">/</span> <span class="n">p</span><span class="o">.</span><span class="n">upsilon</span><span class="p">)))</span>
    <span class="n">b2</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.5</span> <span class="o">*</span> <span class="n">p</span><span class="o">.</span><span class="n">b_ellipse</span> <span class="o">*</span> <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">ltilde</span> <span class="o">**</span> <span class="p">(</span><span class="o">-</span><span class="n">p</span><span class="o">.</span><span class="n">upsilon</span><span class="p">))</span> <span class="o">*</span> <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">upsilon</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span>
          <span class="p">(</span><span class="n">eps_low</span> <span class="o">**</span> <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">upsilon</span> <span class="o">-</span> <span class="mi">2</span><span class="p">))</span> <span class="o">*</span>
          <span class="p">((</span><span class="mi">1</span> <span class="o">-</span> <span class="p">((</span><span class="n">eps_low</span> <span class="o">/</span> <span class="n">p</span><span class="o">.</span><span class="n">ltilde</span><span class="p">)</span> <span class="o">**</span> <span class="n">p</span><span class="o">.</span><span class="n">upsilon</span><span class="p">))</span> <span class="o">**</span>
          <span class="p">((</span><span class="mi">1</span> <span class="o">-</span> <span class="n">p</span><span class="o">.</span><span class="n">upsilon</span><span class="p">)</span> <span class="o">/</span> <span class="n">p</span><span class="o">.</span><span class="n">upsilon</span><span class="p">))</span> <span class="o">*</span>
          <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="p">((</span><span class="n">eps_low</span> <span class="o">/</span> <span class="n">p</span><span class="o">.</span><span class="n">ltilde</span><span class="p">)</span> <span class="o">**</span> <span class="n">p</span><span class="o">.</span><span class="n">upsilon</span><span class="p">)</span> <span class="o">*</span>
          <span class="p">((</span><span class="mi">1</span> <span class="o">-</span> <span class="p">((</span><span class="n">eps_low</span> <span class="o">/</span> <span class="n">p</span><span class="o">.</span><span class="n">ltilde</span><span class="p">)</span> <span class="o">**</span> <span class="n">p</span><span class="o">.</span><span class="n">upsilon</span><span class="p">))</span> <span class="o">**</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">))))</span>
    <span class="n">b1</span> <span class="o">=</span> <span class="p">((</span><span class="n">p</span><span class="o">.</span><span class="n">b_ellipse</span> <span class="o">/</span> <span class="n">p</span><span class="o">.</span><span class="n">ltilde</span><span class="p">)</span> <span class="o">*</span> <span class="p">((</span><span class="n">eps_low</span> <span class="o">/</span> <span class="n">p</span><span class="o">.</span><span class="n">ltilde</span><span class="p">)</span> <span class="o">**</span>
                                      <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">upsilon</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span> <span class="o">*</span>
          <span class="p">((</span><span class="mi">1</span> <span class="o">-</span> <span class="p">((</span><span class="n">eps_low</span> <span class="o">/</span> <span class="n">p</span><span class="o">.</span><span class="n">ltilde</span><span class="p">)</span> <span class="o">**</span> <span class="n">p</span><span class="o">.</span><span class="n">upsilon</span><span class="p">))</span> <span class="o">**</span>
          <span class="p">((</span><span class="mi">1</span> <span class="o">-</span> <span class="n">p</span><span class="o">.</span><span class="n">upsilon</span><span class="p">)</span> <span class="o">/</span> <span class="n">p</span><span class="o">.</span><span class="n">upsilon</span><span class="p">))</span> <span class="o">-</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">b2</span> <span class="o">*</span> <span class="n">eps_low</span><span class="p">))</span>
    <span class="n">MDU_n</span><span class="p">[</span><span class="n">nvec_low</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">b2</span> <span class="o">*</span> <span class="n">nvec</span><span class="p">[</span><span class="n">nvec_low</span><span class="p">]</span> <span class="o">+</span> <span class="n">b1</span>
    <span class="n">d2</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.5</span> <span class="o">*</span> <span class="n">p</span><span class="o">.</span><span class="n">b_ellipse</span> <span class="o">*</span> <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">ltilde</span> <span class="o">**</span> <span class="p">(</span><span class="o">-</span><span class="n">p</span><span class="o">.</span><span class="n">upsilon</span><span class="p">))</span> <span class="o">*</span> <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">upsilon</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span>
          <span class="p">(</span><span class="n">eps_high</span> <span class="o">**</span> <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">upsilon</span> <span class="o">-</span> <span class="mi">2</span><span class="p">))</span> <span class="o">*</span>
          <span class="p">((</span><span class="mi">1</span> <span class="o">-</span> <span class="p">((</span><span class="n">eps_high</span> <span class="o">/</span> <span class="n">p</span><span class="o">.</span><span class="n">ltilde</span><span class="p">)</span> <span class="o">**</span> <span class="n">p</span><span class="o">.</span><span class="n">upsilon</span><span class="p">))</span> <span class="o">**</span>
          <span class="p">((</span><span class="mi">1</span> <span class="o">-</span> <span class="n">p</span><span class="o">.</span><span class="n">upsilon</span><span class="p">)</span> <span class="o">/</span> <span class="n">p</span><span class="o">.</span><span class="n">upsilon</span><span class="p">))</span> <span class="o">*</span>
          <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="p">((</span><span class="n">eps_high</span> <span class="o">/</span> <span class="n">p</span><span class="o">.</span><span class="n">ltilde</span><span class="p">)</span> <span class="o">**</span> <span class="n">p</span><span class="o">.</span><span class="n">upsilon</span><span class="p">)</span> <span class="o">*</span>
          <span class="p">((</span><span class="mi">1</span> <span class="o">-</span> <span class="p">((</span><span class="n">eps_high</span> <span class="o">/</span> <span class="n">p</span><span class="o">.</span><span class="n">ltilde</span><span class="p">)</span> <span class="o">**</span> <span class="n">p</span><span class="o">.</span><span class="n">upsilon</span><span class="p">))</span> <span class="o">**</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">))))</span>
    <span class="n">d1</span> <span class="o">=</span> <span class="p">((</span><span class="n">p</span><span class="o">.</span><span class="n">b_ellipse</span> <span class="o">/</span> <span class="n">p</span><span class="o">.</span><span class="n">ltilde</span><span class="p">)</span> <span class="o">*</span> <span class="p">((</span><span class="n">eps_high</span> <span class="o">/</span> <span class="n">p</span><span class="o">.</span><span class="n">ltilde</span><span class="p">)</span> <span class="o">**</span>
          <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">upsilon</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span> <span class="o">*</span> <span class="p">((</span><span class="mi">1</span> <span class="o">-</span> <span class="p">((</span><span class="n">eps_high</span> <span class="o">/</span> <span class="n">p</span><span class="o">.</span><span class="n">ltilde</span><span class="p">)</span> <span class="o">**</span> <span class="n">p</span><span class="o">.</span><span class="n">upsilon</span><span class="p">))</span> <span class="o">**</span>
          <span class="p">((</span><span class="mi">1</span> <span class="o">-</span> <span class="n">p</span><span class="o">.</span><span class="n">upsilon</span><span class="p">)</span> <span class="o">/</span> <span class="n">p</span><span class="o">.</span><span class="n">upsilon</span><span class="p">))</span> <span class="o">-</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">d2</span> <span class="o">*</span> <span class="n">eps_high</span><span class="p">))</span>
    <span class="n">MDU_n</span><span class="p">[</span><span class="n">nvec_high</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">d2</span> <span class="o">*</span> <span class="n">nvec</span><span class="p">[</span><span class="n">nvec_high</span><span class="p">]</span> <span class="o">+</span> <span class="n">d1</span>
    <span class="n">output</span> <span class="o">=</span> <span class="n">MDU_n</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">squeeze</span><span class="p">(</span><span class="n">chi_n</span><span class="p">)</span>
    <span class="n">output</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">squeeze</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">output</span></div>


<div class="viewcode-block" id="get_bq"><a class="viewcode-back" href="../../household.html#ogusa.household.get_bq">[docs]</a><span class="k">def</span> <span class="nf">get_bq</span><span class="p">(</span><span class="n">BQ</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">method</span><span class="p">):</span>
    <span class="sa">r</span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Calculate bequests to each household.</span>

<span class="sd">    .. math::</span>
<span class="sd">        bq_{j,s,t} = zeta_{j,s}\frac{BQ_{t}}{\lambda_{j}\omega_{s,t}}</span>

<span class="sd">    Args:</span>
<span class="sd">        BQ (array_like): aggregate bequests</span>
<span class="sd">        j (int): index of lifetime ability group</span>
<span class="sd">        p (OG-USA Specifications object): model parameters</span>
<span class="sd">        method (str): adjusts calculation dimensions based on &#39;SS&#39; or</span>
<span class="sd">            &#39;TPI&#39;</span>

<span class="sd">    Returns:</span>
<span class="sd">        bq (array_like): bequests received by each household</span>

<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">use_zeta</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">j</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;SS&#39;</span><span class="p">:</span>
                <span class="n">bq</span> <span class="o">=</span> <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">zeta</span><span class="p">[:,</span> <span class="n">j</span><span class="p">]</span> <span class="o">*</span> <span class="n">BQ</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">lambdas</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">*</span> <span class="n">p</span><span class="o">.</span><span class="n">omega_SS</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">len_T</span> <span class="o">=</span> <span class="n">BQ</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">bq</span> <span class="o">=</span> <span class="p">((</span><span class="n">np</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">zeta</span><span class="p">[:,</span> <span class="n">j</span><span class="p">],</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">S</span><span class="p">))</span> <span class="o">*</span>
                      <span class="n">BQ</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="n">len_T</span><span class="p">,</span> <span class="mi">1</span><span class="p">)))</span> <span class="o">/</span>
                      <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">lambdas</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">*</span> <span class="n">p</span><span class="o">.</span><span class="n">omega</span><span class="p">[:</span><span class="n">len_T</span><span class="p">,</span> <span class="p">:]))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;SS&#39;</span><span class="p">:</span>
                <span class="n">bq</span> <span class="o">=</span> <span class="p">((</span><span class="n">p</span><span class="o">.</span><span class="n">zeta</span> <span class="o">*</span> <span class="n">BQ</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">lambdas</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">J</span><span class="p">))</span> <span class="o">*</span>
                                       <span class="n">p</span><span class="o">.</span><span class="n">omega_SS</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="n">p</span><span class="o">.</span><span class="n">S</span><span class="p">,</span> <span class="mi">1</span><span class="p">))))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">len_T</span> <span class="o">=</span> <span class="n">BQ</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">bq</span> <span class="o">=</span> <span class="p">((</span><span class="n">np</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">zeta</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">S</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">J</span><span class="p">))</span> <span class="o">*</span>
                      <span class="n">utils</span><span class="o">.</span><span class="n">to_timepath_shape</span><span class="p">(</span><span class="n">BQ</span><span class="p">))</span> <span class="o">/</span>
                      <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">lambdas</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">J</span><span class="p">))</span> <span class="o">*</span>
                       <span class="n">p</span><span class="o">.</span><span class="n">omega</span><span class="p">[:</span><span class="n">len_T</span><span class="p">,</span> <span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="n">len_T</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">S</span><span class="p">,</span> <span class="mi">1</span><span class="p">))))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">j</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;SS&#39;</span><span class="p">:</span>
                <span class="n">bq</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">tile</span><span class="p">(</span><span class="n">BQ</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">p</span><span class="o">.</span><span class="n">S</span><span class="p">)</span> <span class="o">/</span> <span class="n">p</span><span class="o">.</span><span class="n">lambdas</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;TPI&#39;</span><span class="p">:</span>
                <span class="n">len_T</span> <span class="o">=</span> <span class="n">BQ</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">bq</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">tile</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">BQ</span><span class="p">[:,</span> <span class="n">j</span><span class="p">]</span> <span class="o">/</span> <span class="n">p</span><span class="o">.</span><span class="n">lambdas</span><span class="p">[</span><span class="n">j</span><span class="p">],</span>
                                        <span class="p">(</span><span class="n">len_T</span><span class="p">,</span> <span class="mi">1</span><span class="p">)),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">S</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;SS&#39;</span><span class="p">:</span>
                <span class="n">BQ_per</span> <span class="o">=</span> <span class="n">BQ</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">squeeze</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">lambdas</span><span class="p">)</span>
                <span class="n">bq</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">tile</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">BQ_per</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">J</span><span class="p">)),</span> <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">S</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;TPI&#39;</span><span class="p">:</span>
                <span class="n">len_T</span> <span class="o">=</span> <span class="n">BQ</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">BQ_per</span> <span class="o">=</span> <span class="n">BQ</span> <span class="o">/</span> <span class="n">p</span><span class="o">.</span><span class="n">lambdas</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">J</span><span class="p">)</span>
                <span class="n">bq</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">tile</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">BQ_per</span><span class="p">,</span> <span class="p">(</span><span class="n">len_T</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">J</span><span class="p">)),</span>
                             <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">S</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">bq</span></div>


<div class="viewcode-block" id="get_tr"><a class="viewcode-back" href="../../household.html#ogusa.household.get_tr">[docs]</a><span class="k">def</span> <span class="nf">get_tr</span><span class="p">(</span><span class="n">TR</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">method</span><span class="p">):</span>
    <span class="sa">r</span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Calculate transfers to each household.</span>

<span class="sd">    .. math::</span>
<span class="sd">        tr_{j,s,t} = zeta_{j,s}\frac{TR_{t}}{\lambda_{j}\omega_{s,t}}</span>

<span class="sd">    Args:</span>
<span class="sd">        TR (array_like): aggregate transfers</span>
<span class="sd">        j (int): index of lifetime ability group</span>
<span class="sd">        p (OG-USA Specifications object): model parameters</span>
<span class="sd">        method (str): adjusts calculation dimensions based on &#39;SS&#39; or</span>
<span class="sd">            &#39;TPI&#39;</span>

<span class="sd">    Returns:</span>
<span class="sd">        tr (array_like): bequests received by each household</span>

<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">if</span> <span class="n">j</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;SS&#39;</span><span class="p">:</span>
            <span class="n">tr</span> <span class="o">=</span> <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">eta</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="p">:,</span> <span class="n">j</span><span class="p">]</span> <span class="o">*</span> <span class="n">TR</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">lambdas</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">*</span> <span class="n">p</span><span class="o">.</span><span class="n">omega_SS</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">len_T</span> <span class="o">=</span> <span class="n">TR</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">tr</span> <span class="o">=</span> <span class="p">((</span><span class="n">p</span><span class="o">.</span><span class="n">eta</span><span class="p">[:</span><span class="n">len_T</span><span class="p">,</span> <span class="p">:,</span> <span class="n">j</span><span class="p">]</span> <span class="o">*</span>
                  <span class="n">TR</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="n">len_T</span><span class="p">,</span> <span class="mi">1</span><span class="p">)))</span> <span class="o">/</span>
                  <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">lambdas</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">*</span> <span class="n">p</span><span class="o">.</span><span class="n">omega</span><span class="p">[:</span><span class="n">len_T</span><span class="p">,</span> <span class="p">:]))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;SS&#39;</span><span class="p">:</span>
            <span class="n">tr</span> <span class="o">=</span> <span class="p">((</span><span class="n">p</span><span class="o">.</span><span class="n">eta</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="p">:,</span> <span class="p">:]</span> <span class="o">*</span> <span class="n">TR</span><span class="p">)</span> <span class="o">/</span>
                  <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">lambdas</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">J</span><span class="p">))</span> <span class="o">*</span>
                   <span class="n">p</span><span class="o">.</span><span class="n">omega_SS</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="n">p</span><span class="o">.</span><span class="n">S</span><span class="p">,</span> <span class="mi">1</span><span class="p">))))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">len_T</span> <span class="o">=</span> <span class="n">TR</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">tr</span> <span class="o">=</span> <span class="p">((</span><span class="n">p</span><span class="o">.</span><span class="n">eta</span><span class="p">[:</span><span class="n">len_T</span><span class="p">,</span> <span class="p">:,</span> <span class="p">:]</span> <span class="o">*</span>
                   <span class="n">utils</span><span class="o">.</span><span class="n">to_timepath_shape</span><span class="p">(</span><span class="n">TR</span><span class="p">))</span> <span class="o">/</span>
                  <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">lambdas</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">J</span><span class="p">))</span> <span class="o">*</span>
                   <span class="n">p</span><span class="o">.</span><span class="n">omega</span><span class="p">[:</span><span class="n">len_T</span><span class="p">,</span> <span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="n">len_T</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">S</span><span class="p">,</span> <span class="mi">1</span><span class="p">))))</span>

    <span class="k">return</span> <span class="n">tr</span></div>


<div class="viewcode-block" id="get_cons"><a class="viewcode-back" href="../../household.html#ogusa.household.get_cons">[docs]</a><span class="k">def</span> <span class="nf">get_cons</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">b_splus1</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">bq</span><span class="p">,</span> <span class="n">net_tax</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">tau_c</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
    <span class="sa">r</span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Calculate household consumption.</span>

<span class="sd">    .. math::</span>
<span class="sd">        c_{j,s,t} =  \frac{(1 + r_{t})b_{j,s,t} + w_t e_{j,s} n_{j,s,t} + bq_{j,s,t} + tr_{j,s,t} - T_{j,s,t} - e^{g_y}b_{j,s+1,t+1}}{1 - \tau^{c}_{s,t}}</span>

<span class="sd">    Args:</span>
<span class="sd">        r (array_like): the real interest rate</span>
<span class="sd">        w (array_like): the real wage rate</span>
<span class="sd">        b (Numpy array): household savings</span>
<span class="sd">        b_splus1 (Numpy array): household savings one period ahead</span>
<span class="sd">        n (Numpy array): household labor supply</span>
<span class="sd">        bq (Numpy array): household bequests received</span>
<span class="sd">        net_tax (Numpy array): household net taxes paid</span>
<span class="sd">        e (Numpy array): effective labor units</span>
<span class="sd">        tau_c (array_like): consumption tax rates</span>
<span class="sd">        p (OG-USA Specifications object): model parameters</span>

<span class="sd">    Returns:</span>
<span class="sd">        cons (Numpy array): household consumption</span>

<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">cons</span> <span class="o">=</span> <span class="p">((</span><span class="mi">1</span> <span class="o">+</span> <span class="n">r</span><span class="p">)</span> <span class="o">*</span> <span class="n">b</span> <span class="o">+</span> <span class="n">w</span> <span class="o">*</span> <span class="n">e</span> <span class="o">*</span> <span class="n">n</span> <span class="o">+</span> <span class="n">bq</span> <span class="o">-</span> <span class="n">b_splus1</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">g_y</span><span class="p">)</span> <span class="o">-</span>
            <span class="n">net_tax</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">tau_c</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">cons</span></div>


<div class="viewcode-block" id="FOC_savings"><a class="viewcode-back" href="../../household.html#ogusa.household.FOC_savings">[docs]</a><span class="k">def</span> <span class="nf">FOC_savings</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">b_splus1</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">bq</span><span class="p">,</span> <span class="n">factor</span><span class="p">,</span> <span class="n">tr</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">rho</span><span class="p">,</span>
                <span class="n">tau_c</span><span class="p">,</span> <span class="n">etr_params</span><span class="p">,</span> <span class="n">mtry_params</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">method</span><span class="p">):</span>
    <span class="sa">r</span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Computes Euler errors for the FOC for savings in the steady state.</span>
<span class="sd">    This function is usually looped through over J, so it does one</span>
<span class="sd">    lifetime income group at a time.</span>

<span class="sd">    .. math::</span>
<span class="sd">        c_{j,s,t}^{-\sigma} = e^{-\sigma g_y}\biggl[\chi^b_j\rho_s(b_{j,s+1,t+1})^{-\sigma} + \beta\bigl(1 - \rho_s\bigr)\Bigl(1 + r_{t+1}\bigl[1 - \tau^{mtry}_{s+1,t+1}\bigr]\Bigr)(c_{j,s+1,t+1})^{-\sigma}\biggr]</span>

<span class="sd">    Args:</span>
<span class="sd">        r (array_like): the real interest rate</span>
<span class="sd">        w (array_like): the real wage rate</span>
<span class="sd">        b (Numpy array): household savings</span>
<span class="sd">        b_splus1 (Numpy array): household savings one period ahead</span>
<span class="sd">        b_splus2 (Numpy array): household savings two periods ahead</span>
<span class="sd">        n (Numpy array): household labor supply</span>
<span class="sd">        bq (Numpy array): household bequests received</span>
<span class="sd">        factor (scalar): scaling factor converting model units to dollars</span>
<span class="sd">        tr (Numpy array): government tranfers to household</span>
<span class="sd">        theta (Numpy array): social security replacement rate for each</span>
<span class="sd">            lifetime income group</span>
<span class="sd">        e (Numpy array): effective labor units</span>
<span class="sd">        rho (Numpy array): mortality rates</span>
<span class="sd">        tau_c (array_like): consumption tax rates</span>
<span class="sd">        etr_params (Numpy array): parameters of the effective tax rate</span>
<span class="sd">            functions</span>
<span class="sd">        mtry_params (Numpy array): parameters of the marginal tax rate</span>
<span class="sd">            on capital income functions</span>
<span class="sd">        t (int): model period</span>
<span class="sd">        j (int): index of ability type</span>
<span class="sd">        p (OG-USA Specifications object): model parameters</span>
<span class="sd">        method (str): adjusts calculation dimensions based on &#39;SS&#39; or</span>
<span class="sd">            &#39;TPI&#39;</span>

<span class="sd">    Returns:</span>
<span class="sd">        euler (Numpy array): Euler error from FOC for savings</span>

<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">if</span> <span class="n">j</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">chi_b</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">chi_b</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">chi_b</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">chi_b</span>
    <span class="k">if</span> <span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;SS&#39;</span><span class="p">:</span>
        <span class="n">h_wealth</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">h_wealth</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">m_wealth</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">m_wealth</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">p_wealth</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">p_wealth</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">h_wealth</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">h_wealth</span><span class="p">[</span><span class="n">t</span><span class="p">]</span>
        <span class="n">m_wealth</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">m_wealth</span><span class="p">[</span><span class="n">t</span><span class="p">]</span>
        <span class="n">p_wealth</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">p_wealth</span><span class="p">[</span><span class="n">t</span><span class="p">]</span>

    <span class="n">taxes</span> <span class="o">=</span> <span class="n">tax</span><span class="o">.</span><span class="n">net_taxes</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">bq</span><span class="p">,</span> <span class="n">factor</span><span class="p">,</span> <span class="n">tr</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span>
                          <span class="kc">False</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">etr_params</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
    <span class="n">cons</span> <span class="o">=</span> <span class="n">get_cons</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">b_splus1</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">bq</span><span class="p">,</span> <span class="n">taxes</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">tau_c</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
    <span class="n">deriv</span> <span class="o">=</span> <span class="p">((</span><span class="mi">1</span> <span class="o">+</span> <span class="n">r</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span>
        <span class="n">r</span> <span class="o">*</span> <span class="n">tax</span><span class="o">.</span><span class="n">MTR_income</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">factor</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">etr_params</span><span class="p">,</span>
                           <span class="n">mtry_params</span><span class="p">,</span> <span class="n">p</span><span class="p">))</span> <span class="o">-</span>
             <span class="n">tax</span><span class="o">.</span><span class="n">MTR_wealth</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">h_wealth</span><span class="p">,</span> <span class="n">m_wealth</span><span class="p">,</span> <span class="n">p_wealth</span><span class="p">))</span>
    <span class="n">savings_ut</span> <span class="o">=</span> <span class="p">(</span><span class="n">rho</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">p</span><span class="o">.</span><span class="n">sigma</span> <span class="o">*</span> <span class="n">p</span><span class="o">.</span><span class="n">g_y</span><span class="p">)</span> <span class="o">*</span> <span class="n">chi_b</span> <span class="o">*</span>
                  <span class="n">b_splus1</span> <span class="o">**</span> <span class="p">(</span><span class="o">-</span><span class="n">p</span><span class="o">.</span><span class="n">sigma</span><span class="p">))</span>
    <span class="n">euler_error</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">n</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">euler_error</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">marg_ut_cons</span><span class="p">(</span><span class="n">cons</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">p</span><span class="o">.</span><span class="n">sigma</span><span class="p">)</span> <span class="o">*</span>
                            <span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">tau_c</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span> <span class="o">-</span> <span class="n">p</span><span class="o">.</span><span class="n">beta</span> <span class="o">*</span>
                            <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">rho</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">*</span> <span class="n">deriv</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="o">*</span>
                            <span class="n">marg_ut_cons</span><span class="p">(</span><span class="n">cons</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">p</span><span class="o">.</span><span class="n">sigma</span><span class="p">)</span> <span class="o">*</span>
                            <span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">tau_c</span><span class="p">[</span><span class="mi">1</span><span class="p">:]))</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">p</span><span class="o">.</span><span class="n">sigma</span> <span class="o">*</span> <span class="n">p</span><span class="o">.</span><span class="n">g_y</span><span class="p">)</span>
                            <span class="o">-</span> <span class="n">savings_ut</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">euler_error</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">marg_ut_cons</span><span class="p">(</span><span class="n">cons</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">p</span><span class="o">.</span><span class="n">sigma</span><span class="p">)</span> <span class="o">*</span>
                           <span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">tau_c</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span> <span class="o">-</span> <span class="n">savings_ut</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">euler_error</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">marg_ut_cons</span><span class="p">(</span><span class="n">cons</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">p</span><span class="o">.</span><span class="n">sigma</span><span class="p">)</span> <span class="o">*</span>
                           <span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">tau_c</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span> <span class="o">-</span> <span class="n">savings_ut</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>

    <span class="k">return</span> <span class="n">euler_error</span></div>


<div class="viewcode-block" id="FOC_labor"><a class="viewcode-back" href="../../household.html#ogusa.household.FOC_labor">[docs]</a><span class="k">def</span> <span class="nf">FOC_labor</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">b_splus1</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">bq</span><span class="p">,</span> <span class="n">factor</span><span class="p">,</span> <span class="n">tr</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="n">chi_n</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span>
              <span class="n">tau_c</span><span class="p">,</span> <span class="n">etr_params</span><span class="p">,</span> <span class="n">mtrx_params</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">method</span><span class="p">):</span>
    <span class="sa">r</span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Computes errors for the FOC for labor supply in the steady</span>
<span class="sd">    state.  This function is usually looped through over J, so it does</span>
<span class="sd">    one lifetime income group at a time.</span>

<span class="sd">    .. math::</span>
<span class="sd">        w_t e_{j,s}\bigl(1 - \tau^{mtrx}_{s,t}\bigr)(c_{j,s,t})^{-\sigma} = \chi^n_{s}\biggl(\frac{b}{\tilde{l}}\biggr)\biggl(\frac{n_{j,s,t}}{\tilde{l}}\biggr)^{\upsilon-1}\Biggl[1 - \biggl(\frac{n_{j,s,t}}{\tilde{l}}\biggr)^\upsilon\Biggr]^{\frac{1-\upsilon}{\upsilon}}</span>

<span class="sd">    Args:</span>
<span class="sd">        r (array_like): the real interest rate</span>
<span class="sd">        w (array_like): the real wage rate</span>
<span class="sd">        b (Numpy array): household savings</span>
<span class="sd">        b_splus1 (Numpy array): household savings one period ahead</span>
<span class="sd">        n (Numpy array): household labor supply</span>
<span class="sd">        bq (Numpy array): household bequests received</span>
<span class="sd">        factor (scalar): scaling factor converting model units to dollars</span>
<span class="sd">        tr (Numpy array): government tranfers to household</span>
<span class="sd">        theta (Numpy array): social security replacement rate for each</span>
<span class="sd">            lifetime income group</span>
<span class="sd">        chi_n (Numpy array): utility weight on the disutility of labor</span>
<span class="sd">            supply</span>
<span class="sd">        e (Numpy array): effective labor units</span>
<span class="sd">        tau_c (array_like): consumption tax rates</span>
<span class="sd">        etr_params (Numpy array): parameters of the effective tax rate</span>
<span class="sd">            functions</span>
<span class="sd">        mtrx_params (Numpy array): parameters of the marginal tax rate</span>
<span class="sd">            on labor income functions</span>
<span class="sd">        t (int): model period</span>
<span class="sd">        j (int): index of ability type</span>
<span class="sd">        p (OG-USA Specifications object): model parameters</span>
<span class="sd">        method (str): adjusts calculation dimensions based on &#39;SS&#39; or</span>
<span class="sd">            &#39;TPI&#39;</span>

<span class="sd">    Returns:</span>
<span class="sd">        FOC_error (Numpy array): error from FOC for labor supply</span>

<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">if</span> <span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;SS&#39;</span><span class="p">:</span>
        <span class="n">tau_payroll</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">tau_payroll</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">elif</span> <span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;TPI_scalar&#39;</span><span class="p">:</span>  <span class="c1"># for 1st donut ring onlye</span>
        <span class="n">tau_payroll</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">tau_payroll</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">length</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">tau_payroll</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">tau_payroll</span><span class="p">[</span><span class="n">t</span><span class="p">:</span><span class="n">t</span> <span class="o">+</span> <span class="n">length</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;TPI&#39;</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">b</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">w</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">tau_payroll</span> <span class="o">=</span> <span class="n">tau_payroll</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">tau_payroll</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>

    <span class="n">taxes</span> <span class="o">=</span> <span class="n">tax</span><span class="o">.</span><span class="n">net_taxes</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">bq</span><span class="p">,</span> <span class="n">factor</span><span class="p">,</span> <span class="n">tr</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span>
                          <span class="kc">False</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">etr_params</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
    <span class="n">cons</span> <span class="o">=</span> <span class="n">get_cons</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">b_splus1</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">bq</span><span class="p">,</span> <span class="n">taxes</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">tau_c</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
    <span class="n">deriv</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">tau_payroll</span> <span class="o">-</span> <span class="n">tax</span><span class="o">.</span><span class="n">MTR_income</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">factor</span><span class="p">,</span>
                                              <span class="kc">False</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">etr_params</span><span class="p">,</span>
                                              <span class="n">mtrx_params</span><span class="p">,</span> <span class="n">p</span><span class="p">))</span>
    <span class="n">FOC_error</span> <span class="o">=</span> <span class="p">(</span><span class="n">marg_ut_cons</span><span class="p">(</span><span class="n">cons</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">sigma</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">tau_c</span><span class="p">))</span> <span class="o">*</span> <span class="n">w</span> <span class="o">*</span>
                 <span class="n">deriv</span> <span class="o">*</span> <span class="n">e</span> <span class="o">-</span> <span class="n">marg_ut_labor</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">chi_n</span><span class="p">,</span> <span class="n">p</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">FOC_error</span></div>


<div class="viewcode-block" id="get_y"><a class="viewcode-back" href="../../household.html#ogusa.household.get_y">[docs]</a><span class="k">def</span> <span class="nf">get_y</span><span class="p">(</span><span class="n">r_hh</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">b_s</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Compute houshold income before taxes.</span>

<span class="sd">    ..math::</span>
<span class="sd">        y_{j,s,t} = r_{hh,t}b_{j,s,t} + w_{t}e_{j,s}n_{j,s,t}</span>

<span class="sd">    Args:</span>
<span class="sd">        r_hh (array_like): real interest rate on the household portfolio</span>
<span class="sd">        w (array_like): real wage rate</span>
<span class="sd">        b_s (Numpy array): household savings coming into the period</span>
<span class="sd">        n (Numpy array): household labor supply</span>
<span class="sd">        p (OG-USA Specifications object): model parameters</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="n">y</span> <span class="o">=</span> <span class="n">r_hh</span> <span class="o">*</span> <span class="n">b_s</span> <span class="o">+</span> <span class="n">w</span> <span class="o">*</span> <span class="n">p</span><span class="o">.</span><span class="n">e</span> <span class="o">*</span> <span class="n">n</span>

    <span class="k">return</span> <span class="n">y</span></div>


<div class="viewcode-block" id="constraint_checker_SS"><a class="viewcode-back" href="../../household.html#ogusa.household.constraint_checker_SS">[docs]</a><span class="k">def</span> <span class="nf">constraint_checker_SS</span><span class="p">(</span><span class="n">bssmat</span><span class="p">,</span> <span class="n">nssmat</span><span class="p">,</span> <span class="n">cssmat</span><span class="p">,</span> <span class="n">ltilde</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Checks constraints on consumption, savings, and labor supply in the</span>
<span class="sd">    steady state.</span>

<span class="sd">    Args:</span>
<span class="sd">        bssmat (Numpy array): steady state distribution of capital</span>
<span class="sd">        nssmat (Numpy array): steady state distribution of labor</span>
<span class="sd">        cssmat (Numpy array): steady state distribution of consumption</span>
<span class="sd">        ltilde (scalar): upper bound of household labor supply</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>

<span class="sd">    Raises:</span>
<span class="sd">        Warnings: if constraints are violated, warnings printed</span>

<span class="sd">    &#39;&#39;&#39;</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Checking constraints on capital, labor, and consumption.&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">bssmat</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">WARNING: There is negative capital stock&#39;</span><span class="p">)</span>
    <span class="n">flag2</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">nssmat</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">WARNING: Labor supply violates nonnegativity &#39;</span><span class="p">,</span>
              <span class="s1">&#39;constraints.&#39;</span><span class="p">)</span>
        <span class="n">flag2</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">nssmat</span> <span class="o">&gt;</span> <span class="n">ltilde</span><span class="p">)</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">WARNING: Labor suppy violates the ltilde constraint.&#39;</span><span class="p">)</span>
        <span class="n">flag2</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">if</span> <span class="n">flag2</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">There were no violations of the constraints on labor&#39;</span><span class="p">,</span>
              <span class="s1">&#39; supply.&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">cssmat</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">WARNING: Consumption violates nonnegativity&#39;</span><span class="p">,</span>
              <span class="s1">&#39; constraints.&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">There were no violations of the constraints on&#39;</span><span class="p">,</span>
              <span class="s1">&#39; consumption.&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="constraint_checker_TPI"><a class="viewcode-back" href="../../household.html#ogusa.household.constraint_checker_TPI">[docs]</a><span class="k">def</span> <span class="nf">constraint_checker_TPI</span><span class="p">(</span><span class="n">b_dist</span><span class="p">,</span> <span class="n">n_dist</span><span class="p">,</span> <span class="n">c_dist</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">ltilde</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Checks constraints on consumption, savings, and labor supply along</span>
<span class="sd">    the transition path. Does this for each period t separately.</span>

<span class="sd">    Args:</span>
<span class="sd">        b_dist (Numpy array): distribution of capital at time t</span>
<span class="sd">        n_dist (Numpy array): distribution of labor at time t</span>
<span class="sd">        c_dist (Numpy array): distribution of consumption at time t</span>
<span class="sd">        t (int): time period</span>
<span class="sd">        ltilde (scalar): upper bound of household labor supply</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>

<span class="sd">    Raises:</span>
<span class="sd">        Warnings: if constraints are violated, warnings printed</span>

<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">b_dist</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">WARNING: Aggregate capital is less than or equal to &#39;</span><span class="p">,</span>
              <span class="s1">&#39;zero in period %.f.&#39;</span> <span class="o">%</span> <span class="n">t</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">n_dist</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">WARNING: Labor supply violates nonnegativity&#39;</span><span class="p">,</span>
              <span class="s1">&#39; constraints in period %.f.&#39;</span> <span class="o">%</span> <span class="n">t</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">n_dist</span> <span class="o">&gt;</span> <span class="n">ltilde</span><span class="p">)</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">WARNING: Labor suppy violates the ltilde constraint&#39;</span><span class="p">,</span>
              <span class="s1">&#39; in period %.f.&#39;</span> <span class="o">%</span> <span class="n">t</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">c_dist</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">WARNING: Consumption violates nonnegativity&#39;</span><span class="p">,</span>
              <span class="s1">&#39; constraints in period %.f.&#39;</span> <span class="o">%</span> <span class="n">t</span><span class="p">)</span></div>
</pre></div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">OG-USA</a></h1>








<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contributor_guide.html">Contributor Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../public_api.html">OG-USA API</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Jason DeBacker and Richard W. Evans.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
    </div>

    

    
  </body>
</html>